"use strict";!function(t){function n(n){var e=t(".page-body");e.load("/"+n,function(t,a,o){"success"===a?(e.attr("data-page",n),window.JSVIEW[n]&&window.JSVIEW[n].ready(e)):swal("Page not found")})}window.JSVIEW={},t(function(){var t="sync";window.onhashchange=function(){n(location.hash.substr(1)||t)},n(location.hash.substr(1)||t)})}(jQuery),function(t){window.JSVIEW.remote={ready:function(n){t("button[data-action]",n).click(function(n){n.stopPropagation(),n.preventDefault();var e=n.target.attributes["data-action"].value;swal({title:e.capitalize()+" current process?",text:"This may take a few seconds.",showCancelButton:!0},function(n){n&&t.get("/remote/"+e).then(function(){setTimeout(function(){document.location.reload(!0)},500)}).fail(function(t,n,e){swal({title:"Load processes",text:n+": "+e,type:"error"})})})})}}}(jQuery),function(t){var n=2e3;window.JSVIEW.sync={ready:function(e){var a=t("#qrcode",e),o=a.attr("data-sid"),i=+a.attr("data-timeout")||3e4,c=i/n;a.qrcode({width:256,height:256,text:o}),t("#btnNewCode",e).click(function(t){document.location.reload()});var r=setInterval(function(){t.get("/sync/check/"+o).then(function(n){n.synced||--c||(a.hide(),t("#btnNewCode",e).show(),clearInterval(r))}).fail(function(t,n,e){clearInterval(r),swal({title:"Sync",text:n+": "+e,type:"error"},function(){document.location.reload()})})},n)}}}(jQuery),function(t){var n={datetime:function(t){return moment(+t).format("YYYY-MM-DD HH:mm:ss")},status:function(t){return n[t]||t},0:"NO_SYNC",1:"SYNCED",2:"DATA_RECEIVED"};window.JSVIEW["sync/list"]={ready:function(e){t("[data-format]",e).each(function(t,e){e.innerHTML=n[e.attributes["data-format"].value](e.innerText)}),t("a[data-action]",e).click(function(n){n.stopPropagation(),n.preventDefault();var e=n.target.attributes["data-action"].value,a=n.target.attributes["data-sid"].value;swal({title:e.capitalize()+" "+a+"?",showCancelButton:!0,closeOnConfirm:!0},function(n){n&&setTimeout(function(){"sync"===e?t.post("/sync/"+a).then(function(){location.reload()}).fail(function(t,n,e){swal({title:"Sync",text:n+": "+e,type:"error"})}):"expire"===e&&t.post("/sync/change/"+a,{lastSync:Date.now()-3e4}).then(function(){location.reload()}).fail(function(t,n,e){swal({title:"Expire",text:n+": "+e,type:"error"})})},100)})})}}}(jQuery),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};
//# sourceMappingURL=all.min.js.map
